<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ColrC: Tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="/colrc" alt="ColrC">
      <img alt="Logo" src="colrc-pixels.png"/>
    </a>
  </td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ColrC
   &#160;<span id="projectnumber">0.3.6</span>
   </div>
   <div id="projectbrief">An easy to use C library for linux terminal colors/escape-codes.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tests.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tests </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md23"></a>
About</h1>
<p>ColrC uses <a href="https://github.com/mortie/snow">snow</a> for testing. There are several test targets in the <code>makefile</code> that do different things. Some of them are for quick sanity-checking, some use compiler protections, and some use Valgrind. There is also a test runner (<code>run_tests.sh</code>) that provides an easy way to run tests through a wrapper program like <code>valgrind</code> or <code>kdbg</code>/<code>gdb</code>.</p>
<h1><a class="anchor" id="autotoc_md24"></a>
Basic Test:</h1>
<p>If you want to run them you will have to download/clone the source and build/run them: </p><div class="fragment"><div class="line"># The default `test` target uses `-fsanitize` options, which can be slow:</div><div class="line">make test</div></div><!-- fragment --><p>This will build all of the tests using the latest <code><a class="el" href="colr_8c.html" title="Implements everything in the colr.h header. ">colr.c</a></code> and run them.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
Memcheck Test:</h1>
<p>You can also run the tests through <code>valgrind</code> with the <code>testmemcheck</code> target: </p><div class="fragment"><div class="line"># Removes the `-fsanitize` options, to let `valgrind` do it&#39;s thing:</div><div class="line">make testmemcheck</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md26"></a>
Quick Testing</h1>
<p>During development, I usually use the <code>testfast</code> target for small changes, followed by a <code>testfull</code> to use the address sanitizer and other protection features. </p><div class="fragment"><div class="line">make testfast</div><div class="line"></div><div class="line"># After I&#39;ve sorted out the &quot;easy&quot; failures:</div><div class="line">make testfull</div><div class="line"></div><div class="line"># And finally, before pushing changes, the &quot;everything test&quot;.</div><div class="line"># This is important because it ensures that all examples will compile cleanly</div><div class="line"># and there are no leaks:</div><div class="line">make testeverything</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md27"></a>
Test Everything</h1>
<p>The 'everything test' builds the colr tool and unit tests, both debug and release mode (some bugs only show up in release mode), and runs them through <code>valgrind</code> and <code>-fsanitize</code> (<code>libasan</code>).</p>
<p>The examples are built and ran through <code>valgrind</code>, including the examples found in the source code (see <code>snippet.py --examples</code>). This ensures that all example code is correct/runnable.</p>
<p>The coverage target is built (with the html report).</p>
<p>Finally, the binaries may be rebuilt if they are in a different state than when the process started (switch back to debug build for development).</p>
<p>If any of those things fail, the process is stopped and there is probably a bug worth fixing. Errors are always reported, but the noise from all of those steps can be silenced with <code>--quiet</code>.</p>
<p>Each of these steps has found one or more bugs in the code or documentation while developing ColrC. I don't mind running this before pushing my changes.</p>
<p>If you'd like to run every possible compile target, with tests and memcheck, including the example code and source-file examples (the 'everything test'): </p><div class="fragment"><div class="line">make testeverything</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md28"></a>
Test Tool</h1>
<p>The <code>./test/run_tests.sh</code> script can run the <code>snow</code>-based tests, run <code>memcheck</code> on the examples, and run the <code>colrc</code> tool through <code>memcheck</code>. The "everything test" is implemented with this tool. Run <code>./test/run_test.sh -h</code> to see options for it. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
        <a href="http://www.doxygen.org/index.html">
        Doxygen <!-- <img class="footer" src="doxygen.png" alt="doxygen"/> -->
        </a>
        1.8.13
    </li>
    <!-- This actually comes *before* the "generated by" msg, because of float. -->
    <li class="footer">
        ColrC v.0.3.6
    </li>
  </ul>
</div>
</body>
</html>
